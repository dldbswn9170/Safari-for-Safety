# 🌐 외부 네트워크에서 접속하기 (컴퓨터만 켜놓으면 OK)

---

## 🎯 목표

컴퓨터만 켜놓으면 다른 WiFi나 LTE에서도 접속 가능하게 만들기

---

## 📋 필요한 작업 (한 번만 설정)

### 1️⃣ 공유기 설정 (10분)

#### Step 1: 공유기 관리 페이지 접속
브라우저에서 입력:
- `http://192.168.0.1` 또는
- `http://192.168.1.1` 또는
- `http://192.168.219.1` (KT 공유기)

#### Step 2: 로그인
- 관리자 계정으로 로그인
- (모르면 공유기 뒷면이나 설명서 확인)

#### Step 3: 포트포워딩 메뉴 찾기
- **고급 설정** 또는 **Advanced**
- **NAT/포트포워딩** 또는 **Port Forwarding**
- **가상 서버** 또는 **Virtual Server**

#### Step 4: 두 개 규칙 추가

**규칙 1 - Backend:**
```
서비스 이름: Safari-Backend
내부 IP: 203.234.62.145
외부 포트: 5000
내부 포트: 5000
프로토콜: TCP
```

**규칙 2 - Frontend:**
```
서비스 이름: Safari-Frontend
내부 IP: 203.234.62.145
외부 포트: 3000
내부 포트: 3000
프로토콜: TCP
```

#### Step 5: 저장 및 공유기 재부팅

---

### 2️⃣ 공인 IP 확인

터미널에서 실행:
```bash
curl ifconfig.me
```

나오는 숫자가 공인 IP입니다. (예: 123.456.789.012)

---

### 3️⃣ 방화벽 설정 (이미 완료)

✅ `setup-firewall.bat` 실행했으면 완료!

---

## 🚀 사용 방법

### 서버 시작
```
start-server.bat 더블클릭
```

### 외부에서 접속
```
http://[공인IP]:3000
```

예시: `http://123.456.789.012:3000`

**이제 다른 WiFi나 LTE에서도 접속 가능!** 🎉

---

## ⚠️ 주의사항

### 공인 IP가 바뀔 수 있음

공유기를 재부팅하거나 인터넷이 끊겼다 다시 연결되면 공인 IP가 바뀔 수 있습니다.

**해결 방법:**
1. IP가 바뀌면 `curl ifconfig.me` 다시 실행
2. 새 IP 주소 확인
3. 새 주소 공유

또는 **DDNS (무료)** 사용하면 고정 도메인 사용 가능:
- `safari.iptime.org` 같은 주소로 접속
- 공유기 설정에서 DDNS 설정

---

## 🔒 보안 팁

### 1. 강력한 비밀번호 사용
backend/.env 파일:
```env
JWT_SECRET=매우_긴_랜덤_문자열
DB_PASSWORD=강력한_비밀번호
```

### 2. 필요할 때만 서버 켜기
- 사용하지 않을 때는 서버 종료
- 포트포워딩도 필요 없으면 비활성화

### 3. 방화벽 유지
- Windows 방화벽 켜두기
- 공유기 방화벽 활성화

---

## 🆘 문제 해결

### "외부에서 접속이 안돼요"

**체크리스트:**
1. ✅ 서버가 실행 중인가? (start-server.bat)
2. ✅ 방화벽 규칙 추가했나? (setup-firewall.bat)
3. ✅ 공유기 포트포워딩 설정했나?
4. ✅ 공인 IP가 맞나? (curl ifconfig.me로 재확인)
5. ✅ 공유기 설정 저장 & 재부팅했나?

### "공인 IP가 안나와요"
```bash
# 다른 방법으로 확인
curl https://ipinfo.io/ip
```

### "포트포워딩 메뉴를 못찾겠어요"
공유기 제조사별로 메뉴 이름이 다릅니다:
- ipTIME: **고급 설정 → NAT/라우터 관리 → 포트포워딩**
- 공유기 모델명 + "포트포워딩 설정" 검색해보세요

---

## 📊 최종 구성

```
인터넷
  ↓
공유기 (포트포워딩)
  ↓
내 컴퓨터 (203.234.62.145)
  ├─ PostgreSQL (포트 5432)
  ├─ Backend (포트 5000)
  └─ Frontend (포트 3000)
```

**접속 흐름:**
```
외부 사용자
  ↓
http://[공인IP]:3000
  ↓
공유기가 내 컴퓨터로 전달
  ↓
Safari-for-Safety 서비스 제공
```

---

## ✅ 설정 완료 후

1. **서버 시작**: `start-server.bat`
2. **공인 IP 확인**: `curl ifconfig.me`
3. **친구들에게 공유**: `http://[공인IP]:3000`

컴퓨터만 켜놓으면 자동으로 서버 실행! 🚀
